<div class="history-page">
  <h2 class="history-title">My Bookings</h2>

  <div *ngIf="loading" class="loading">Loading bookings...</div>

  <div *ngIf="!loading && bookings.length === 0" class="no-booking-msg">
    You have no past bookings.
  </div>

  <div class="booking-list" *ngIf="!loading && bookings.length > 0">
    <div class="booking-card" *ngFor="let b of bookings">
      <div class="booking-header">
        <div>
          <h3>{{ b.schedule.flight.airline }}</h3>
          <p>{{ b.schedule.flight.source }} â†’ {{ b.schedule.flight.destination }}</p>
        </div>
        <span class="booking-status" [ngClass]="b.status.toLowerCase()">
          {{ b.status }}
        </span>
      </div>

      <div class="booking-details">
        <p><strong>Departure:</strong> {{ b.schedule.departureTime | date:'medium' }}</p>
        <p><strong>Arrival:</strong> {{ b.schedule.arrivalTime | date:'medium' }}</p>
        <p><strong>Seats Booked:</strong> {{ b.seatsBooked }}</p>
        <p><strong>Booking Time:</strong> {{ b.bookingTime | date:'medium' }}</p>
      </div>

      <div class="booking-actions">
        <button
          *ngIf="b.status === 'CONFIRMED'"
          class="btn-cancel"
          (click)="cancel(b._id)"
        >
          Cancel Booking
        </button>
      </div>
    </div>
  </div>
</div>
